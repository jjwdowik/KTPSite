/*
Ascensor.js 
version: 1.6.5 (2013-10-25)
description: Ascensor is a jquery plugin which aims to train and adapt content according to an elevator system
repository: https://github.com/kirkas/Ascensor.js
license: BSD
author: LÃ©o Galley <contact@kirkas.ch>
*/
(function(o,i,t){function n(i,t){this.element=i,this.options=o.extend({},r,t),this._defaults=r,this._name=e,this.init()}var e="ascensor",r={ascensorFloorName:null,childType:"div",windowsOn:0,direction:"y",loop:!0,time:300,easing:"linear",keyNavigation:!0,touchSwipeIntegration:!1,queued:!1};n.prototype.init=function(){function n(){u=x.width(),d=x.height(),m.width(u).height(d),y.width(u).height(d),"y"===g.options.direction&&y.stop().scrollTop(w*d),"x"===g.options.direction&&(y.stop().scrollLeft(w*u),m.each(function(i){o(this).css("left",i*u)})),b&&(m.each(function(i){o(this).css({left:g.options.direction[i][1]*u,top:g.options.direction[i][0]*d})}),p(w,1),y.stop().scrollLeft(g.options.direction[w][1]*u).scrollTop(g.options.direction[w][0]*d))}function e(o){if("y"==g.options.direction){if("left"==o)return;"down"==o?g.next():"up"==o&&r()}else if("x"==g.options.direction){if("up"==o)return;"left"==o?r():"right"==o&&g.next()}else b&&("down"==o?s(1,0):"up"==o?s(-1,0):"left"==o?s(0,-1):"right"==o&&s(0,1))}function r(){var o=w-1;if(0>o){if(!g.options.loop)return;o=v}p(o,g.options.time)}function s(i,t){var n=[g.options.direction[w][0]+i,g.options.direction[w][1]+t];o.each(g.options.direction,function(o){""+n==""+g.options.direction[o]&&p(o,g.options.time)})}function c(){if(i.location.hash){h=i.location.hash.split("/").pop();var t=!1;return o(g.options.ascensorFloorName).each(function(o){h===g.options.ascensorFloorName[o]&&(t=o)}),t}}function p(o,t){l(w,o);var n={time:t,easing:g.options.easing,callback:function(){a(w,o)}};if("y"===g.options.direction)n.property={scrollTop:o*d};else if("x"===g.options.direction)n.property={scrollLeft:o*u};else if(b&&(n.property={scrollLeft:g.options.direction[o][1]*u,scrollTop:g.options.direction[o][0]*d},g.options.queued)){var e=y.scrollLeft()===g.options.direction[o][1]*u,r=y.scrollTop()===g.options.direction[o][0]*d;"x"===g.options.queued?e?n.property={scrollTop:g.options.direction[o][0]*d}:(n.property={scrollLeft:g.options.direction[o][1]*u},n.callback=function(){y.stop().animate({scrollTop:g.options.direction[o][0]*d},t,g.options.easing,function(){a(w,o)})}):"y"===g.options.queued&&(r?n.property={scrollLeft:g.options.direction[o][1]*u}:(n.property={scrollTop:g.options.direction[o][0]*d},n.callback=function(){y.stop().animate({scrollLeft:g.options.direction[o][1]*u},t,g.options.easing,function(){a(w,o)})}))}y.stop().animate(n.property,t,g.options.easing,n.callback),g.options.ascensorFloorName&&(i.location.hash="/"+g.options.ascensorFloorName[o]),w=o}function l(o,i){var t={from:o,to:i};y.trigger("scrollStart",t)}function a(o,i){var t={from:o,to:i};y.trigger("scrollEnd",t)}function f(i){if(!o("input, textarea, button").is(":focus"))switch(i.which){case 40:case 83:if("x"==g.options.direction)return;y.trigger("scrollToDirection","down");break;case 38:case 87:if("x"==g.options.direction)return;y.trigger("scrollToDirection","up");break;case 37:case 65:if("y"==g.options.direction)return;y.trigger("scrollToDirection","left");break;case 39:case 68:if("y"==g.options.direction)return;y.trigger("scrollToDirection","right")}}var u,d,h,g=this,y=o(this.element),m=y.children(g.options.childType),w=g.options.windowsOn,v=-1,T=(g.options.direction,o(t)),x=o(i),b="object"==typeof g.options.direction;if(this.next=function(){var o=w+1;if(o>v){if(!g.options.loop)return;o=0}p(o,g.options.time)},y.on("scrollToDirection",function(o,i){e(i)}),y.on("scrollToStage",function(o,i){i>v||p(i,g.options.time)}),y.on("next",function(){g.next()}),y.on("prev",function(){r()}),y.on("update",function(){m=y.children(g.options.childType),n()}),y.css({position:"absolute"}),m.each(function(){v+=1}),("x"===g.options.direction||b)&&m.css({position:"absolute",overflow:"auto"}),g.options.keyNavigation&&T.keydown(f),g.options.ascensorFloorName&&i.location.hash){var k=c();k&&(w=k)}p(w,1),g.options.touchSwipeIntegration&&y.swipe({swipe:function(o,i){y.trigger("scrollToDirection",i)},threshold:70}),x.resize(function(){n()}).load(function(){n()}).resize(),i.DeviceOrientationEvent&&x.bind("orientationchange",function(){n()})},o.fn[e]=function(i){return this.each(function(){o.data(this,"plugin_"+e)||o.data(this,"plugin_"+e,new n(this,i))})}})(jQuery,window,document);